# Нефункциональные требования (NFR) для сервиса HealthMonitor

## Производительность (Performance)

### `NFR-PERF-01`
**Название:** Время ответа API эндпоинта сбора метрик.

**Описание:** 95-й перцентиль времени ответа для POST `/api/v1/metrics` не должен превышать указанного значения.

**Метрика и целевое значение:** 95-й перцентиль (p95) < 200 мс.

**Способ проверки:** Нагрузочное тестирование с помощью k6.

### `NFR-PERF-02`
**Название:** Время ответа API эндпоинта получения метрик.

**Описание:** 95-й перцентиль времени ответа для GET `/api/v1/metrics` не должен превышать указанного значения.

**Метрика и целевое значение:** 95-й перцентиль (p95) < 100 мс.

**Способ проверки:** Нагрузочное тестирование с помощью k6.

## Надежность (Reliability)

### `NFR-REL-01`
**Название:** Доступность сервиса.

**Описание:** Сервис должен быть доступен для пользователей в соответствии с целевым показателем.

**Метрика и целевое значение:** Доступность 99.9% в течение месяца.

**Способ проверки:** Мониторинг с помощью Prometheus и алертинг в Grafana.

### `NFR-REL-02`
**Название:** Восстановление после сбоя.

**Описание:** Сервис должен автоматически восстанавливаться после сбоя в течение заданного времени.

**Метрика и целевое значение:** Среднее время восстановления (MTTR) < 10 минут.

**Способ проверки:** Мониторинг времени восстановления после инцидентов.

## Безопасность (Security)

### `NFR-SEC-01`
**Название:** Аутентификация пользователей.

**Описание:** Все запросы к API должны проходить аутентификацию с помощью JWT токена.

**Метрика и целевое значение:** 100% запросов без валидного JWT токена отклоняются.

**Способ проверки:** Тестирование безопасности с помощью OWASP ZAP.

### `NFR-SEC-02`
**Название:** Шифрование передаваемых данных.

**Описание:** Все данные, передаваемые между клиентом и сервером, должны быть зашифрованы с использованием TLS.

**Метрика и целевое значение:** 100% трафика проходит через TLS 1.2 или выше.

**Способ проверки:** Проверка конфигурации веб-сервера и сканирование уязвимостей.

## Сопровождаемость (Maintainability)

### `NFR-MNT-01`
**Название:** Логирование операций.

**Описание:** Все критические операции (ошибки, вход в систему, изменение конфигурации) должны логироваться.

**Метрика и целевое значение:** 100% критических операций записываются в лог.

**Способ проверки:** Аудит лог-файлов и проверка корректности записей.

### `NFR-MNT-02`
**Название:** Мониторинг здоровья сервиса.

**Описание:** Сервис должен предоставлять эндпоинт для проверки здоровья, который возвращает статус всех критических зависимостей.

**Метрика и целевое значение:** Эндпоинт `/health` должен возвращать 200 OK, когда сервис здоров.

**Способ проверки:** Периодические проверки эндпоинта здоровья с помощью Prometheus.
